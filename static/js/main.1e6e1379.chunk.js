(this["webpackJsonpreact-zustand-form"]=this["webpackJsonpreact-zustand-form"]||[]).push([[0],{182:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(67),c=n.n(i),l=n(19),s=l.a({firstName:l.b().max(15,"Must be 15 characters or less").required("Required"),lastName:l.b().max(20,"Must be 20 characters or less").required("Required"),email:l.b().email("Invalid email address").required("Required")}),o=n(76),u=n(74),d=n.n(u),j=n(75),m=n(73),b=n(20),v=d()(Object(j.combine)({valuesMap:{},validationMap:{},schema:{}},(function(e){return{set:e}}))),h={useStore:v,useFormValues:function(e){return v((function(t){return t.valuesMap[e]}),(function(e,t){return Object(m.isEqual)(e,t)}))},useFormValidation:function(e){return v((function(t){return t.validationMap[e]}))},getInitValues:function(e){return v.getState().valuesMap[e]},getSchema:function(){return v.getState().schema},useAllFormKeys:function(){return v((function(e){return Object.keys(e.validationMap)}),(function(e,t){return e.length===t.length}))},addBlankForm:function(){var e=Object(b.d)({dictionaries:[b.a,b.c,b.b],length:2}),t=v.getState();t.validationMap[e]=!1,t.valuesMap[e]={firstName:"",lastName:"",email:""},v.setState({validationMap:t.validationMap,valuesMap:t.valuesMap})},updateGlobalState:function(e,t){var n=v.getState();n.schema.isValid(e).then((function(a){n.valuesMap[t]=e,n.validationMap[t]=a,v.setState({validationMap:n.validationMap,valuesMap:n.valuesMap})}))},deleteForm:function(e){var t=v.getState();delete t.validationMap[e],delete t.valuesMap[e],v.setState({validationMap:t.validationMap,valuesMap:t.valuesMap})},deleteAllForms:function(){v.setState({validationMap:{},valuesMap:{}})}},f=n(1),p=function(e){var t=e.formKey,n=r.a.useRef(h.getInitValues(t)).current,a=r.a.useRef(h.getSchema()).current,i=Object(o.a)({initialValues:n,validationSchema:a,onSubmit:function(e){},validate:function(e){return h.updateGlobalState(e,t)},validateOnChange:!0});r.a.useEffect((function(){i.validateForm()}),[]);var c=Object.keys(null!==n&&void 0!==n?n:{});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{textAlign:"center"},children:t}),Object(f.jsx)("button",{onClick:function(){return h.deleteForm(t)},children:"Delete"}),Object(f.jsx)("form",{children:c.map((function(e){return t=e,Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:75,marginTop:20},children:[Object(f.jsx)("label",{htmlFor:t,children:t}),Object(f.jsx)("input",{id:t,name:t,type:"text",onChange:i.handleChange,onBlur:i.handleBlur,value:i.values[t]}),i.errors[t]&&Object(f.jsx)("div",{style:{color:"red"},children:"Error: "+i.errors[t]})]},t);var t}))})]})},x=function(e){var t=e.children;return Object(f.jsx)("div",{style:{display:"flex",flexDirection:"column",border:"1px solid black",borderRadius:10,padding:10,margin:10,overflowX:"auto"},children:t})},O=function(e){var t=e.formKey,n=h.useFormValidation(t);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{textAlign:"center",marginBottom:10},children:t+" validation equality"}),Object(f.jsx)("div",{children:"isValid: "+n}),Object(f.jsx)("div",{style:{whiteSpace:"nowrap",marginTop:10},children:"rendered: "+Date.now()})]})},g=n(6),y=function(e){var t=e.formKey,n=h.useFormValues(t);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{textAlign:"center",marginBottom:10},children:t+" values deep equality"}),Object.entries(n).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(f.jsx)("div",{style:{whiteSpace:"nowrap"},children:"".concat(n,': "').concat(a,'"')})})),Object(f.jsx)("div",{style:{whiteSpace:"nowrap",marginTop:10},children:"rendered: "+Date.now()})]})},M=function(){var e=h.useStore((function(e){return e}));return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{textAlign:"center",marginBottom:10},children:"use form store shallow equality: ==="}),Object.entries(e).filter((function(e){var t=Object(g.a)(e,1)[0];return"valuesMap"===t||"validationMap"===t})).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return Object(f.jsx)("div",{style:{whiteSpace:"nowrap"},children:"".concat(n,': "').concat(JSON.stringify(a),'"')})})),Object(f.jsx)("div",{style:{whiteSpace:"nowrap",marginTop:10},children:"rendered: "+Date.now()})]})},S=function(){var e=h.useAllFormKeys();return r.a.useEffect((function(){h.useStore.setState({schema:s})}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(x,{children:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{textAlign:"center"},children:"use forms length equality"}),Object(f.jsx)("button",{onClick:h.deleteAllForms,children:"Delete all forms"}),Object(f.jsx)("button",{onClick:h.addBlankForm,children:"Add blank form"}),e.map((function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)(x,{children:Object(f.jsx)(p,{formKey:e})}),Object(f.jsx)(x,{children:Object(f.jsx)(y,{formKey:e})}),Object(f.jsx)(x,{children:Object(f.jsx)(O,{formKey:e})})]},e)}))]})}),Object(f.jsx)(x,{children:Object(f.jsx)(M,{})})]})};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(S,{})}),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.1e6e1379.chunk.js.map