{"version":3,"sources":["schemas/contact_schema.ts","hooks/use_forms.ts","components/hook_form.tsx","components/card.tsx","components/sub_form_validation.tsx","components/sub_form_fields.tsx","app.tsx","index.tsx"],"names":["contactSchema","Yup","firstName","max","required","lastName","email","useStore","create","combine","valuesMap","validationMap","schema","set","useForms","useFormValues","formKey","s","s0","s1","isEqual","useFormValidation","getInitValues","getState","getSchema","useAllFormKeys","Object","keys","length","addBlankForm","key","uniqueNamesGenerator","dictionaries","adjectives","colors","animals","prevState","setState","updateGlobalState","newVals","isValid","then","HookForm","initialValues","React","useRef","current","validationSchema","formik","useFormik","onSubmit","_","validate","validateOnChange","useEffect","validateForm","formFields","style","textAlign","map","k","fieldKey","display","flexDirection","height","marginTop","htmlFor","id","name","type","onChange","handleChange","onBlur","handleBlur","value","values","errors","color","Card","children","border","borderRadius","padding","margin","SubToFormValidation","Date","toISOString","SubToFormValues","valuesString","JSON","stringify","App","formKeys","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7755a013.chunk.js","sourcesContent":["import * as Yup from 'yup'\n\nexport const contactSchema = Yup.object({\n  firstName: Yup.string()\n    .max(15, 'Must be 15 characters or less')\n    .required('Required'),\n\n  lastName: Yup.string()\n    .max(20, 'Must be 20 characters or less')\n    .required('Required'),\n\n  email: Yup.string().email('Invalid email address').required('Required'),\n})\n","import create from 'zustand'\nimport {combine} from 'zustand/middleware'\nimport {isEqual} from 'lodash'\nimport {\n  adjectives,\n  colors,\n  animals,\n  uniqueNamesGenerator,\n} from 'unique-names-generator'\n\nconst useStore = create(\n  combine(\n    {\n      valuesMap: {} as {[key: string]: {[key: string]: string}},\n      validationMap: {} as {[key: string]: boolean},\n      schema: {} as any,\n    },\n    (set) => ({\n      set,\n    })\n  )\n)\n\nconst useFormValues = (formKey: string) =>\n  useStore(\n    (s) => s.valuesMap[formKey],\n    (s0, s1) => isEqual(s0, s1)\n  )\n\nconst useFormValidation = (formKey: string) =>\n  useStore((s) => s.validationMap[formKey])\n\nconst getInitValues = (formKey: string) =>\n  useStore.getState().valuesMap[formKey]\n\nconst getSchema = () => useStore.getState().schema\n\nconst useFormKeys = () =>\n  useStore(\n    (s) => Object.keys(s.validationMap),\n    (s0, s1) => s0.length === s1.length\n  )\n\nconst addBlankForm = () => {\n  const key = uniqueNamesGenerator({\n    dictionaries: [adjectives, colors, animals],\n    length: 2,\n  })\n\n  const values = {\n    firstName: '',\n    lastName: '',\n    email: '',\n  }\n\n  const prevState = useStore.getState()\n  prevState.validationMap[key] = false\n  prevState.valuesMap[key] = values\n\n  useStore.setState({\n    validationMap: prevState.validationMap,\n    valuesMap: prevState.valuesMap,\n  })\n}\n\nconst updateGlobalState = (\n  newVals: Record<string, string>,\n  formKey: string\n) => {\n  const prevState = useStore.getState()\n\n  prevState.schema.isValid(newVals).then((isValid: boolean) => {\n    prevState.valuesMap[formKey] = newVals\n    prevState.validationMap[formKey] = isValid\n\n    useStore.setState({\n      validationMap: prevState.validationMap,\n      valuesMap: prevState.valuesMap,\n    })\n  })\n}\n\nexport const useForms = {\n  useStore,\n  useFormValues,\n  useFormValidation,\n  getInitValues,\n  getSchema,\n  useAllFormKeys: useFormKeys,\n  addBlankForm,\n  updateGlobalState,\n}\n","import React from 'react'\nimport {useFormik} from 'formik'\nimport {useForms} from '../hooks/use_forms'\n\nexport const HookForm = ({formKey}: {formKey: string}) => {\n  const initialValues = React.useRef(useForms.getInitValues(formKey)).current\n  const validationSchema = React.useRef(useForms.getSchema()).current\n\n  const formik = useFormik({\n    initialValues,\n    validationSchema,\n    onSubmit: (_) => {},\n    validate: (newVals: any) => useForms.updateGlobalState(newVals, formKey),\n    validateOnChange: true,\n  })\n\n  React.useEffect(() => {\n    formik.validateForm()\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const getField = (fieldKey: string) => {\n    return (\n      <div\n        key={fieldKey}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          height: 75,\n          marginTop: 20\n        }}\n      >\n        <label htmlFor={fieldKey}>{fieldKey}</label>\n\n        <input\n          id={fieldKey}\n          name={fieldKey}\n          type=\"text\"\n          onChange={formik.handleChange}\n          onBlur={formik.handleBlur}\n          value={formik.values[fieldKey]}\n        />\n\n        {formik.errors[fieldKey] && (\n          <div style={{color: 'red'}}>\n            {'Error: ' + formik.errors[fieldKey]}\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  const formFields = Object.keys(initialValues ?? {})\n\n  return (\n    <>\n      <div style={{textAlign: 'center'}}>{formKey}</div>\n\n      <form>{formFields.map((k) => getField(k))}</form>\n    </>\n  )\n}\n","export const Card = ({children}: {children: JSX.Element}) => {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        border: '1px solid black',\n        borderRadius: 10,\n        padding: 10,\n        margin: 10,\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n","import {useForms} from 'src/hooks/use_forms'\n\nexport const SubToFormValidation = ({formKey}: {formKey: string}) => {\n  const isValid = useForms.useFormValidation(formKey)\n\n  return (\n    <>\n      <div style={{textAlign: 'center'}}>{formKey + ' sub validation equality'}</div>\n      <div>{'isValid: ' + isValid}</div>\n      <div>{'renderedAt: ' + new Date().toISOString()}</div>\n    </>\n  )\n}\n","import {useForms} from 'src/hooks/use_forms'\n\nexport const SubToFormValues = ({formKey}: {formKey: string}) => {\n  const values = useForms.useFormValues(formKey)\n\n  const valuesString = JSON.stringify(values)\n\n  return (\n    <>\n      <div style={{textAlign: 'center'}}>{formKey + ' sub deep values equality'}</div>\n      <div>{'values: ' + valuesString}</div>\n      <div>{'renderedAt: ' + new Date().toISOString()}</div>\n    </>\n  )\n}\n","import React from 'react'\nimport {contactSchema} from './schemas/contact_schema'\nimport {HookForm} from './components/hook_form'\nimport {useForms} from './hooks/use_forms'\nimport {Card} from './components/card'\nimport {SubToFormValidation} from './components/sub_form_validation'\nimport {SubToFormValues} from './components/sub_form_fields'\n\nexport const App = () => {\n  const formKeys = useForms.useAllFormKeys()\n\n  React.useEffect(() => {\n    useForms.useStore.setState({schema: contactSchema})\n  }, [])\n\n  return (\n    <Card>\n      <>\n        <div style={{textAlign: 'center'}}>{'sub all forms length equality'}</div>\n\n        <button onClick={useForms.addBlankForm}>Add blank form</button>\n\n        {formKeys.map((k) => (\n          <div key={k}>\n            <Card>\n              <HookForm formKey={k} />\n            </Card>\n\n            <Card>\n              <SubToFormValues formKey={k} />\n            </Card>\n\n            <Card>\n              <SubToFormValidation formKey={k} />\n            </Card>\n          </div>\n        ))}\n      </>\n    </Card>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {App} from './app'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}